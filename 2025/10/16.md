## 取り組んだ課題一覧
- オブジェクト指向 Python 自販機問題（実装・リファクタリング）
- スッキリわかるSQL入門 第3版（233〜265頁）
## わかったこと
### python
- 4クラス（Suica / Drink / DrinkRepository / VendingMachine）の責務分離が整理でき、在庫はRepo、決済はSuica、販売はVMに集約された
- Drinkはbrand・priceのみを持つ純粋な値オブジェクトに簡素化し、数量やIDはリポジトリ側で扱う方針に変更
- DrinkRepositoryは在庫を[brand, price, deque(Drink...)]で保持し、FIFO消費（popleft）で現実の在庫消費を再現
- VendingMachineの`vend()`は「決済→在庫減」＋売切時は返金（ロールバック）で整合性を担保、`restock()`はRepoに委譲
- 例外は“握るなら責任を取る”が原則：そのまま伝播させる場合はtryを書かない／ロールバックや翻訳が必要ならtryで握って`raise`または`raise ... from e`
- `raise ... from e`は下層の技術例外を上位のドメイン例外へ翻訳しつつ原因を保持できる（トレースが繋がる）
- Suicaの支払いは不足額`shortage`を計算して`InsufficientBalanceError`に渡すようにリファクタ（UIで「あと◯円必要」を表示可能）
- `_`（アンダースコア変数）は「構造はあるが今回は使わない」を明示するために使うと読みやすい（インデックス直叩きより安全）
- ジェネレータ式 vs リスト内包表記：大量・遅延はジェネレータ、少量・明快さ重視はリストを選ぶ（今回は少量でも勉強も兼ねてジェネレータにした）
- 内包表記の評価順：for句→左側式。複数forは左から右にネスト／内包表記内のジェネレータ式は別スコープで“外→内”の順に評価
### sql
- テーブル結合
## 感じたこと、メモ
- 例外処理の「握る／流す／翻訳する」の基準が腹落ちした。特にVMでの返金ロールバックはドメイン的にも実装的にも美しい。
- 責務の整理（値オブジェクト化・RepoのFIFO・VMの協調）でコード全体が読みやすく拡張しやすくなった。
- `_`やdeque、内包表記の動きなど、Pythonの基本構文をちゃんと意図を持って使えるようになってきた実感がある。
## 次やること
- オブジェクト指向 Python 自販機問題（実装・リファクタリング）
## 学習時間
- 今日：4h00m
- 今週：15h15m（土-）
- 今月：30h15m
- 累計：627h45m